// ACCESO ADMINISTRATIVO DE EMERGENCIA - TEMPORAL
// Este archivo activa el modo de emergencia sin cambiar el cÃ³digo principal

console.log('ðŸš¨ ACTIVANDO MODO EMERGENCIA ADMINISTRATIVO');

// FunciÃ³n para simular respuesta exitosa del backend
window.simulateAdminLogin = function() {
  const emergencyAdmin = {
    id: 'emergency-admin-2024',
    email: 'baconfort.centro@gmail.com',
    name: 'Administrador de Emergencia',
    role: 'admin',
    phone: '+54 11 1234-5678',
    emailVerified: true,
    createdAt: new Date().toISOString(),
    isEmergencyMode: true
  };
  
  // Guardar en localStorage como si fuera una sesiÃ³n normal
  localStorage.setItem('baconfort-user', JSON.stringify(emergencyAdmin));
  localStorage.setItem('baconfort-token', 'emergency-token-' + Date.now());
  
  console.log('âœ… EMERGENCIA: SesiÃ³n administrativa creada');
  
  // Recargar la pÃ¡gina para que tome efecto
  setTimeout(() => {
    window.location.reload();
  }, 1000);
};

// Auto-ejecutar si se detectan las credenciales correctas en la URL
if (window.location.pathname.includes('/admin') || window.location.pathname.includes('access-required')) {
  console.log('ðŸ” EMERGENCIA: PÃ¡gina administrativa detectada');
  
  // Verificar si ya hay una sesiÃ³n de emergencia vÃ¡lida
  const existingUser = localStorage.getItem('baconfort-user');
  if (existingUser) {
    try {
      const user = JSON.parse(existingUser);
      if (user.role === 'admin' && user.isEmergencyMode) {
        console.log('âœ… EMERGENCIA: SesiÃ³n administrativa ya activa');
        return;
      }
    } catch (e) {
      console.log('âš ï¸ EMERGENCIA: SesiÃ³n corrupta, limpiando...');
      localStorage.removeItem('baconfort-user');
      localStorage.removeItem('baconfort-token');
    }
  }
  
  // Mostrar botÃ³n de emergencia si no hay sesiÃ³n
  setTimeout(() => {
    const button = document.createElement('button');
    button.innerHTML = 'ðŸš¨ ACCESO DE EMERGENCIA';
    button.style.cssText = `
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 10000;
      background: #ff4444;
      color: white;
      border: none;
      padding: 10px 15px;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
      box-shadow: 0 2px 10px rgba(0,0,0,0.3);
    `;
    button.onclick = window.simulateAdminLogin;
    document.body.appendChild(button);
    
    console.log('ðŸš¨ EMERGENCIA: BotÃ³n de acceso administrativo agregado');
  }, 2000);
}
