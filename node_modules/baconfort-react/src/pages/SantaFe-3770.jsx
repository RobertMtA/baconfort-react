import { useState, useEffect } from "react";
import { Link } from 'react-router-dom';
import PriceCard from "../components/PriceCard/PriceCard";
import Gallery from '../components/Gallery/Gallery';
import ReservationForm from '../components/ReservationForm/ReservationForm';
import AvailabilityInquiryForm from '../components/AvailabilityInquiryForm/AvailabilityInquiryForm';
import Loading from '../components/Loading/Loading';
import VideoPlayer from '../components/VideoPlayer/VideoPlayer';
import ReviewsSection from '../components/ReviewsSection/ReviewsSection';
import { useNavbar } from '../hooks/useNavbar';
import { useGallery } from '../hooks/useGallery';
import { useProperty } from '../hooks/useProperty';
import { usePropertyFromContext } from '../hooks/usePropertyFromContext';
import ImageUtils from '../utils/ImageUtils';
import '../styles/departamento.css';
import NotFound from './NotFound';



function SantaFe3770() {
  const [showGallery, setShowGallery] = useState(false);
  const [selectedImage, setSelectedImage] = useState(0);
  const [isLoading, setIsLoading] = useState(true);
  const { navbarOpen, toggleNavbar, closeNavbar } = useNavbar();
  
  // AMENITIES HARDCODEADAS - SIN localStorage NI BACKEND
  const amenitiesSantaFe3770 = {
    departamento: [
      { icon: 'fas fa-tv', text: 'Smart TV 43"' },
      { icon: 'fas fa-wifi', text: 'WiFi 300MB Fibra √ìptica' },
      { icon: 'fas fa-snowflake', text: 'Aire Acondicionado F/C' },
      { icon: 'fas fa-utensils', text: 'Cocina Completamente Equipada' },
      { icon: 'fas fa-bed', text: 'Ropa de Cama' },
      { icon: 'fas fa-bath', text: 'Ba√±o Privado con Ducha' },
      { icon: 'fas fa-blender', text: 'Microondas y Electrodom√©sticos' },
      { icon: 'fas fa-couch', text: 'Living Amueblado' },
      { icon: 'fas fa-lock', text: 'Caja Fuerte' },
      { icon: 'fas fa-laptop', text: 'Zona de Trabajo/Escritorio' }
    ],
    servicios: [
      { icon: 'fas fa-concierge-bell', text: 'Recepci√≥n 24hs' },
      { icon: 'fas fa-shield-alt', text: 'Seguridad 24hs' },
      { icon: 'fas fa-car', text: 'Servicio de Traslados' },
      { icon: 'fas fa-phone', text: 'Asistencia 24/7' }
    ],
    amenitiesEdificio: [
      { icon: 'fas fa-elevator', text: 'Ascensor' },
      { icon: 'fas fa-dumbbell', text: 'Gimnasio' },
      { icon: 'fas fa-swimming-pool', text: 'Piscina' },
      { icon: 'fas fa-sun', text: 'Solarium/Terraza' },
      { icon: 'fas fa-users', text: 'SUM/Sal√≥n de Usos M√∫ltiples' },
      { icon: 'fas fa-spa', text: 'Sauna' },
      { icon: 'fas fa-tree', text: 'Jard√≠n/Espacios Verdes' },
      { icon: 'fas fa-building', text: 'Edificio Moderno' },
      { icon: 'fas fa-fire', text: 'Parrilla' },
      { icon: 'fas fa-glass-cheers', text: 'Sum' },
      { icon: 'fas fa-tshirt', text: 'Laundry' },
      { icon: 'fas fa-shield-alt', text: 'Porter√≠a/Seguridad 24hs' }
    ]
  };
  
  // Cargar galer√≠a desde la base de datos
  const { 
    images: galleryImages, 
    loading: galleryLoading, 
    error: galleryError, 
    mainImage,
    refreshGallery 
  } = useGallery('santa-fe-3770');

  // Cargar informaci√≥n completa de la propiedad desde el contexto (prioritario)
  const {
    property: contextProperty,
    loading: isContextLoading,
    error: contextError,
    refreshProperty: refreshContextProperty,
    isUsingContext
  } = usePropertyFromContext('santa-fe-3770');

  // Cargar informaci√≥n completa de la propiedad desde el backend (fallback)
  const {
    property: apiProperty,
    loading: isApiPropertyLoading,
    error: apiPropertyError,
    refreshProperty: refreshApiProperty,
    isUsingFallback
  } = useProperty('santa-fe-3770');

  // PROPIEDAD FINAL CON AMENITIES HARDCODEADAS
  const baseProperty = contextProperty || apiProperty;
  const property = baseProperty ? {
    ...baseProperty,
    amenities: amenitiesSantaFe3770 // SIEMPRE usar las amenities hardcodeadas
  } : {
    // Datos b√°sicos si no hay backend
    id: 'santa-fe-3770',
    title: 'Santa Fe 3770',
    amenities: amenitiesSantaFe3770,
    prices: {
      daily: "USD 75",
      weekly: "USD 420", 
      monthly: "USD 1000"
    }
  };

  const isPropertyLoading = isContextLoading || isApiPropertyLoading;
  const propertyError = contextError || apiPropertyError;

  // Funci√≥n para refrescar propiedades
  const refreshProperty = () => {
    if (refreshContextProperty) refreshContextProperty();
    if (refreshApiProperty) refreshApiProperty();
  };

  // Escuchar eventos de actualizaci√≥n de precios
  useEffect(() => {
    const handlePriceUpdate = (event) => {
      if (event.detail.propertyId === 'santa-fe-3770') {
        console.log('üîÑ SantaFe3770 - Evento de actualizaci√≥n de precios recibido:', event.detail);
        // Forzar refresh de la propiedad para obtener los nuevos precios
        refreshProperty();
      }
    };

    window.addEventListener('baconfort-prices-updated', handlePriceUpdate);
    return () => {
      window.removeEventListener('baconfort-prices-updated', handlePriceUpdate);
    };
  }, [refreshProperty]);

  useEffect(() => {
    // Log de la informaci√≥n de la propiedad cuando se carga
    if (property) {
      console.log('üè† SANTA FE 3770: Propiedad cargada:', property);
      console.log('üí∞ SANTA FE 3770: Precios recibidos:', property.prices);
      console.log('ÔøΩ SANTA FE 3770: Amenities:', property.amenities);
      console.log('ÔøΩ SANTA FE 3770: Usando fallback:', isUsingFallback);
    }
  }, [property, isUsingFallback]);
  
  // Estado para precios din√°micos
  const [currentPrices, setCurrentPrices] = useState({
    monthly: "USD 1000",
    weekly: "USD 420", 
    daily: "USD 75"
  });
  
  // Actualizar precios cuando cambien los datos del backend
  useEffect(() => {
    if (property && property.prices) {
      console.log('üí∞ SantaFe3770 - Actualizando precios:', property.prices);
      setCurrentPrices({
        monthly: property.prices.monthly || "USD 1000",
        weekly: property.prices.weekly || "USD 420",
        daily: property.prices.daily || "USD 75"
      });
    }
  }, [property?.prices]);
  
  // Escuchar eventos de actualizaci√≥n de precios
  useEffect(() => {
    const handlePriceUpdate = (event) => {
      console.log('üîç SantaFe3770 - Evento recibido completo:', event);
      console.log('üîç SantaFe3770 - Event detail:', event.detail);
      console.log('üîç SantaFe3770 - propertyId del evento:', event.detail.propertyId);
      console.log('üîç SantaFe3770 - Mi ID esperado: santa-fe-3770');
      console.log('üîç SantaFe3770 - ¬øCoinciden?:', event.detail.propertyId === 'santa-fe-3770');
      
      if (event.detail.propertyId === 'santa-fe-3770') {
        console.log('‚úÖ SantaFe3770 - Evento de actualizaci√≥n de precios recibido:', event.detail);
        console.log('üí∞ SantaFe3770 - Precios recibidos:', event.detail.prices);
        
        setCurrentPrices({
          monthly: event.detail.prices.monthly || "USD 1000",
          weekly: event.detail.prices.weekly || "USD 420",
          daily: event.detail.prices.daily || "USD 75"
        });
        
        console.log('üí∞ SantaFe3770 - Precios actualizados a:', {
          monthly: event.detail.prices.monthly || "USD 1000",
          weekly: event.detail.prices.weekly || "USD 420",
          daily: event.detail.prices.daily || "USD 75"
        });
      }
    };

    window.addEventListener('baconfort-prices-updated', handlePriceUpdate);
    return () => window.removeEventListener('baconfort-prices-updated', handlePriceUpdate);
  }, []);
  
  // Im√°genes de fallback para cuando no hay im√°genes en la base de datos
  const demoImages = [
    '/img/img-santa-fe1-3770.jpg',
    '/img/img-santa-fe2-3770.jpg',
    '/img/img-santa-fe3-3770.jpg',
    '/img/img-santa-fe4-3770.jpg',
    '/img/img-santa-fe5-3770.jpg',
    '/img/img-santa-fe6-3770.jpg',
    '/img/img-santa-fe7-3770.jpg',
    '/img/img-santa-fe8-3770.jpg',
    '/img/img-santa-fe9-3770.jpg',
    '/img/img-santa-fe10-3770.jpg',
    '/img/img-santa-fe11-3770.jpg',
    '/img/img-santa-fe12-3770.jpg',
    '/img/img-santa-fe13-3770.jpg',
    '/img/img-santa-fe14-3770.jpg',
    '/img/img-santa-fe15-3770.jpg',
    '/img/img-santa-fe16-3770.jpg',
    '/img/img-santa-fe17-3770.jpg',
    '/img/img-santa-fe18-3770.jpg',
    '/img/img-santa-fe19-3770.jpg',
    '/img/img-santa-fe20-3770.jpg',
    '/img/img-santa-fe21-3770.jpg',
  ];
  
  // Solo usar im√°genes demo para esta propiedad espec√≠fica (santa-fe-3770)
  // Para propiedades nuevas que crees, NO usar demo si no hay im√°genes
  const images = galleryImages.length > 0 ? galleryImages : 
                (property?.id === 'santa-fe-3770' || !property?.id) ? demoImages : [];

  // Aplicar amenities hardcodeadas al property existente
  if (property && property.amenities) {
    property.amenities = amenitiesSantaFe3770;
  }

  // LOG: Verificar amenities
  console.log('üéØ SANTAFE3770: Amenities hardcodeadas cargadas:', {
    total: amenitiesSantaFe3770.departamento.length + 
           amenitiesSantaFe3770.servicios.length + 
           amenitiesSantaFe3770.amenitiesEdificio.length,
    departamento: amenitiesSantaFe3770.departamento.length,
    servicios: amenitiesSantaFe3770.servicios.length,
    edificio: amenitiesSantaFe3770.amenitiesEdificio.length
  });

  // Procesar im√°genes con ImageUtils
  const processedImages = images.map(img => ImageUtils.getImageSrc(img));

  useEffect(() => {
    // Simular carga de im√°genes y esperar a que se cargue la galer√≠a
    const loadImages = async () => {
      // Esperar a que la galer√≠a termine de cargar
      if (galleryLoading) {
        return;
      }

      const images = document.querySelectorAll('img');
      const promises = Array.from(images).map(img => {
        if (img.complete) return Promise.resolve();
        return new Promise(resolve => {
          img.addEventListener('load', resolve);
          img.addEventListener('error', resolve);
        });
      });

      await Promise.all(promises);
      setIsLoading(false);
    };

    loadImages();
  }, [galleryLoading]); // Dependencia del estado de carga de la galer√≠a

  const openGallery = (index) => {
    setSelectedImage(index);
    setShowGallery(true);
  };

  useEffect(() => {
    const loadImages = async () => {
      try {
        const imagePromises = processedImages.map(src => {
          return new Promise((resolve, reject) => {
            const img = new Image();
            img.src = src;
            img.onload = resolve;
            img.onerror = reject;
          });
        });

        await Promise.all(imagePromises);
        setIsLoading(false);
      } catch (error) {
        console.error('Error loading images:', error);
        setIsLoading(false);
      }
    };

    loadImages();
  }, [processedImages]);

  return (
    <>
      {!['/santafe3770', '/departamentos/santa-fe-3770'].includes(window.location.pathname) ? (
        <NotFound />
      ) : (
        <>
          {isLoading && <Loading />}
          {/* Navbar independiente */}
          <nav className="navbar navbar-expand-lg sticky-top convencion-navbar">
            <div className="container">
              <Link className="navbar-brand" to="/" aria-label="BACONFORT Home">
                <img 
                  src="/img/logo.jpg" 
                  alt="BACONFORT Logo" 
                  width="40" 
                  height="40" 
                  className="brand-logo"
                  loading="lazy"
                />
                <i className="fas fa-star ms-2 brand-icon" aria-hidden="true"></i> 
                <span className="brand-text">BACONFORT</span>
              </Link>
              <button 
                className="navbar-toggler" 
                type="button" 
                onClick={toggleNavbar}
                aria-controls="navbarNav" 
                aria-expanded={navbarOpen} 
                aria-label="Abrir men√∫ de navegaci√≥n"
              >
                <span className="navbar-toggler-icon"></span>
              </button>
              <div className={`navbar-collapse ${navbarOpen ? 'show' : 'collapse'}`} id="navbarNav">
                <ul className="navbar-nav ms-auto">
                  <li className="nav-item">
                    <a className="nav-link" href="/" onClick={closeNavbar} aria-label="Ir al inicio">
                      <i className="fas fa-home nav-icon" aria-hidden="true"></i> 
                      Inicio
                    </a>
                  </li>
                  <li className="nav-item">
                    <a className="nav-link" href="#servicios" onClick={closeNavbar} aria-label="Ver detalles de la propiedad">
                      <i className="fas fa-list nav-icon" aria-hidden="true"></i> 
                      Detalles
                    </a>
                  </li>
                  <li className="nav-item">
                    <a className="nav-link" href="#ubicacion" onClick={closeNavbar} aria-label="Ver ubicaci√≥n en el mapa">
                      <i className="fas fa-map-marker-alt nav-icon" aria-hidden="true"></i> 
                      Ubicaci√≥n
                    </a>
                  </li>
                  <li className="nav-item">
                    <a className="nav-link" href="#rese√±as" onClick={closeNavbar} aria-label="Ver rese√±as de hu√©spedes">
                      <i className="fas fa-star nav-icon" aria-hidden="true"></i> 
                      Rese√±as
                    </a>
                  </li>
                  <li className="nav-item">
                    <a className="nav-link" href="#santa-fe-3770-precios" onClick={closeNavbar} aria-label="Ver precios de alquiler">
                      <i className="fas fa-tag nav-icon" aria-hidden="true"></i> 
                      Precio
                    </a>
                  </li>
                  <li className="nav-item">
                    <a className="nav-link" href="#consulta" onClick={closeNavbar} aria-label="Consultar disponibilidad">
                      <i className="fas fa-calendar-check nav-icon" aria-hidden="true"></i> 
                      Consulta
                    </a>
                  </li>
                  <li className="nav-item">
                    <a className="nav-link" href="#calendario" onClick={closeNavbar} aria-label="Ver calendario de disponibilidad">
                      <i className="fas fa-calendar-alt nav-icon" aria-hidden="true"></i> 
                      Calendario
                    </a>
                  </li>
                </ul>
              </div>
            </div>
          </nav>

          {/* Secci√≥n Hero con Video */}
          <div className="video-hero">
            <VideoPlayer
              src={ImageUtils.getVideoSrc(property?.heroVideo) || "/video/video-portada-santa-fe-3770.mp4"}
              poster={ImageUtils.getImageSrc(mainImage || property?.coverImage || "/img/img-santa-fe10.jpg")}
              title={property?.title || "Departamento Santa Fe 3770"}
              autoPlay={true}
              muted={true}
              loop={true}
              controls={false}
              className="hero-video"
            />
            <div className="video-overlay"></div>
            <div className="video-content">
            
            </div>
          </div>

          <main className="departamento-page moldes-container">
            <section id="servicios" className="services container py-5">
              <div className="row">
                <div className="col-lg-10 mx-auto">
                  <h1 className="text-center mb-4"><i className="fas fa-building"></i> Palermo Lifestylet</h1>
                  <h2 className="h4 text-center mb-4"><i className="fas fa-map-marker-alt"></i>   Santa Fe 3770 - Confort y Espacio</h2>
                  
                  <div className="property-features mb-5">
                    <div className="row text-center">
                      <div className="col-md-3 col-6 mb-3">
                        <i className="fas fa-building fa-2x mb-2 feature-icon building-icon"></i>
                        <p> 12¬∞ Piso con Ascensor</p>
                      </div>
                      <div className="col-md-3 col-6 mb-3">
                        <i className="fas fa-bed fa-2x mb-2 feature-icon bed-icon"></i>
                        <p> 2 Dormitorios</p>
                      </div>
                      <div className="col-md-3 col-6 mb-3">
                        <i className="fas fa-snowflake fa-2x mb-2 feature-icon ac-icon"></i>
                        <p>Aire Acondicionado F/C</p>
                      </div>
                      <div className="col-md-3 col-6 mb-3">
                        <i className="fas fa-users fa-2x mb-2 feature-icon people-icon"></i>
                        <p>Para 2 Hu√©spedes</p>
                      </div>
                    </div>
                  </div>
                  <div id="santa-fe-3770-precios" className="pricing-container">
                    <h2 className="pricing-title"><i className="fas fa-dollar-sign"></i> Valor del Alquiler</h2>
                    <div className="pricing-cards">
                      <PriceCard 
                        title="Por Mes"
                        amount={currentPrices.monthly}
                        details="No incluye servicios y limpieza semanal"
                        whatsappMessage="Me interesa el departamento en Santa Fe 3770 para alquiler mensual"
                        propertyId="santa-fe-3770"
                      />
                      <PriceCard 
                        title="Por Semana"
                        amount={currentPrices.weekly}
                        details="No incluye una limpieza"
                        whatsappMessage="Me interesa el departamento en Santa Fe 3770 para alquiler semanal"
                        propertyId="santa-fe-3770"
                      />
                      <PriceCard 
                        title="Por D√≠a"
                        amount={currentPrices.daily}
                        details="M√≠nimo 3 noches"
                        whatsappMessage="Me interesa el departamento en Santa Fe 3770 para alquiler diario"
                        propertyId="santa-fe-3770"
                      />
                    </div>
                  </div>

                  <div className="service">
                    <h3>
                      <i className="fas fa-home" aria-hidden="true"></i> Chic Studio by Jard√≠n Bot√°nico<br />
                      <i className="fas fa-map-marker-alt" aria-hidden="true"></i> Av. Santa Fe 3770<br />
                    </h3>
                    <div className="description">
                      <p lang="es">
                        <strong>En Espa√±ol:</strong><br />
                        {property?.description?.es || "Moderno departamento de dos ambientes en pleno coraz√≥n de Palermo con dise√±o contempor√°neo y amenities de lujo. Ubicaci√≥n privilegiada con f√°cil acceso a transporte y entretenimiento."}
                      </p>
                      <hr />
                      <p lang="en">
                        <strong>In English:</strong><br />
                        {property?.description?.en || "Modern two-room apartment in the heart of Palermo with contemporary design and luxury amenities. Prime location with easy access to transport and entertainment."}
                      </p>
                      <hr />
                      <p lang="pt">
                        <strong>Em Portugu√™s:</strong><br />
                        {property?.description?.pt || "Moderno apartamento de dois ambientes no cora√ß√£o de Palermo com design contempor√¢neo e amenidades de luxo. Localiza√ß√£o privilegiada com f√°cil acesso a transporte e entretenimento."}
                      </p>
                    </div>
                  </div>
                  
                  {/* Comodidades Destacadas */}
                  <div className="amenities-list mb-5">
                    <div className="d-flex justify-content-between align-items-center mb-3">
                      <h3 className="h5 mb-0">
                        <i className="fas fa-star"></i> Comodidades Destacadas
                      </h3>
                      <small className="text-muted">
                        {amenitiesSantaFe3770.departamento.length + amenitiesSantaFe3770.servicios.length + amenitiesSantaFe3770.amenitiesEdificio.length} comodidades totales
                      </small>
                    </div>
                    
                    {/* Mostrar comodidades hardcodeadas */}
                    <div className="row">
                      {/* Departamento */}
                      <div className="col-md-4">
                        <h4 className="h6 mb-3"><i className="fas fa-home"></i> Departamento</h4>
                        <ul className="list-unstyled">
                          {amenitiesSantaFe3770.departamento.map((amenity, index) => (
                            <li key={`dept-${index}`}>
                              <i className={amenity.icon}></i> {amenity.text}
                            </li>
                          ))}
                        </ul>
                      </div>
                      
                      {/* Servicios */}
                      <div className="col-md-4">
                        <h4 className="h6 mb-3"><i className="fas fa-concierge-bell"></i> Servicios</h4>
                        <ul className="list-unstyled">
                          {amenitiesSantaFe3770.servicios.map((amenity, index) => (
                            <li key={`serv-${index}`}>
                              <i className={amenity.icon}></i> {amenity.text}
                            </li>
                          ))}
                        </ul>
                      </div>
                      
                      {/* Amenities del Edificio */}
                      <div className="col-md-4">
                        <h4 className="h6 mb-3"><i className="fas fa-building"></i> Amenities del Edificio</h4>
                        <ul className="list-unstyled">
                          {amenitiesSantaFe3770.amenitiesEdificio.map((amenity, index) => (
                            <li key={`amenities-${index}`}>
                              <i className={amenity.icon}></i> {amenity.text}
                            </li>
                          ))}
                        </ul>
                      </div>
                    </div>
                  </div>

                  <section className="gallery-section">
                    <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: '20px' }}>
                      <h2><i className="fas fa-images"></i> Galer√≠a de Im√°genes</h2>
                      <div style={{ display: 'flex', gap: '10px' }}>
                        <button 
                          onClick={refreshGallery}
                          className="btn btn-sm btn-outline-primary"
                          title="Actualizar galer√≠a"
                        >
                          <i className="fas fa-sync-alt"></i> Actualizar Galer√≠a
                        </button>
                      </div>
                    </div>
                    <div className="gallery-container">
                      {processedImages.map((img, index) => (
                        <div key={index} className="gallery-item" onClick={() => openGallery(index)}>
                          <img src={img} alt={`Departamento Santa Fe 3770 - ${index + 1}`} loading="lazy" />
                        </div>
                      ))}
                    </div>
                  </section>
                </div>
              </div>
            </section>
            <div className="col-lg-4">
                  {/* Reservation form moved to bottom section with correct apartmentName prop */}
                </div>
            <section id="ubicacion" className="py-5 bg-light">
              <div className="container">
                <div className="row">
                  <div className="col-12 text-center mb-4">
                    <h2 className="section-title">
                      <i className="fas fa-map-marker-alt"></i> Ubicaci√≥n Santa Fe 3770
                    </h2>
                  </div>
                </div>
                <div className="row">
                  <div className="col-lg-12 mb-4">
                    <iframe 
                      src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3284.7660184958695!2d-58.419351225655085!3d-34.584786556496226!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x95bcb57f7a315c89%3A0x77e5993c26725c26!2sAv.%20Sta.%20Fe%203770%2C%20C1425%20Cdad.%20Aut%C3%B3noma%20de%20Buenos%20Aires!5e0!3m2!1ses-419!2sar!4v1746478051004!5m2!1ses-419!2sar" 
                      width="100%" 
                      height="450" 
                      style={{border:0}}
                      allowFullScreen 
                      loading="lazy" 
                      referrerPolicy="no-referrer-when-downgrade"
                      title="Mapa de Santa Fe 3770"
                    ></iframe>
                  </div>
                </div>
                <div className="row">
                  <div className="col-lg-6">
                    <div className="location-details mb-4">
                      <h3 className="h4">Puntos de inter√©s cercanos:</h3>
                      <ul className="list-unstyled">
                      <li><i className="fas fa-subway"></i> Subte L√≠nea D - Scalabrini Ortiz (1 min)</li>
                                <li><i className="fas fa-store"></i> Av. Santa Fe - Zona comercial (1 min)</li>
                                <li><i className="fas fa-tree"></i> Jard√≠n Bot√°nico Carlos Thays (2 min)</li>
                                <li><i className="fas fa-shopping-cart"></i> Alto Palermo Shopping (15 min)</li>
                                <li><i className="fas fa-hospital"></i> Hospital Italiano (10 min)</li>
                                <li><i className="fas fa-hospital"></i> Sanatorio G√ºemes (8 min)</li>
                                <li><i className="fas fa-bus"></i> M√∫ltiples l√≠neas de colectivo</li>
                                <li><i className="fas fa-coffee"></i> Cafeter√≠as y restaurantes (1 min)</li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </section>

            <div className="house-rules mb-5 container">
              <h3 className="h5 mb-3 text-center">Informaci√≥n Importante</h3>
              <div className="row">
                <div className="col-md-6">
                  <ul className="list-unstyled">
                    <li><i className="fas fa-clock"></i> Check-in: 14:00</li>
                    <li><i className="fas fa-clock"></i> Check-out: 11:00</li>
                    <li><i className="fas fa-smoking-ban"></i> No fumar</li>
                  </ul>
                </div>
                <div className="col-md-6">
                  <ul className="list-unstyled">
                    <li><i className="fas fa-paw"></i> Mascotas permitidas (consultar)</li>
                    <li><i className="fas fa-baby"></i> Apto para ni√±os</li>
                    <li><i className="fas fa-shield-alt"></i> Dep√≥sito de seguridad requerido</li>
                  </ul>
                </div>
              </div>
            </div>

            {/* Secci√≥n de Consulta de Disponibilidad */}
            <section id="consulta" className="consultation-section py-5">
              <div className="container">
                <div className="row justify-content-center">
                  <div className="col-lg-10 col-xl-8">
                    <div className="consultation-form-wrapper">
                      <AvailabilityInquiryForm 
                        apartmentName="Santa Fe 3770" 
                        propertyId="santa-fe-3770" 
                      />
                    </div>
                  </div>
                </div>
              </div>
            </section>

            {/* Secci√≥n de Calendario de Reservas */}
            <section id="calendario" className="reservation-section py-5 bg-light">
              <div className="container">
                <div className="row justify-content-center">
                  <div className="col-lg-10 col-xl-8">
                    <div className="reservation-form-wrapper">
                      <ReservationForm apartmentName="Santa Fe 3770" propertyId="santa-fe-3770" />
                    </div>
                  </div>
                </div>
              </div>
            </section>

          </main>

          {/* Secci√≥n de Rese√±as */}
          <ReviewsSection propertyId="santa-fe-3770" />
          
          {showGallery && (
            <Gallery 
              images={processedImages}
              currentIndex={selectedImage}
              onClose={() => setShowGallery(false)}
            />
          )}
        </>
      )}
    </>
  );
}

export default SantaFe3770;